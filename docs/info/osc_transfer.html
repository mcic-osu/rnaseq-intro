<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jelmer Poelstra">
<meta name="dcterms.date" content="2023-07-18">

<title>File transfer</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">RNAseq analysis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text"><i class="fa-solid fa-home" aria-label="home"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../modules/01_intro.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-computing-skills" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">1. Computing skills</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-computing-skills">    
        <li>
    <a class="dropdown-item" href="../modules/02_osc.html" rel="" target="">
 <span class="dropdown-text">- OSC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/03_vscode.html" rel="" target="">
 <span class="dropdown-text">- VS Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/04_shell.html" rel="" target="">
 <span class="dropdown-text">- Unix shell I</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/05_shell2.html" rel="" target="">
 <span class="dropdown-text">- Unix shell II</span></a>
  </li>  
        <li class="dropdown-header">- Genomic data files [TBA]</li>
        <li class="dropdown-header">- Shell scripting [TBA]</li>
        <li class="dropdown-header">- Software at OSC [TBA]</li>
        <li class="dropdown-header">- SLURM compute jobs [TBA]</li>
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-from-reads-to-counts" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">2. From reads to counts</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-from-reads-to-counts">    
        <li class="dropdown-header">- Read QC with <code>FastQC</code> and <code>MultiQC</code> [TBA]</li>
        <li class="dropdown-header">- Trimming with <code>TrimGalore</code> [TBA]</li>
        <li class="dropdown-header">- rRNA removal with <code>SortMeRNA</code> [TBA]</li>
        <li class="dropdown-header">- Alignment with <code>STAR</code> [TBA]</li>
        <li class="dropdown-header">- Counting with <code>Salmon</code> [TBA]</li>
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-analyzing-the-counts" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">3. Analyzing the counts</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-analyzing-the-counts">    
        <li class="dropdown-header">- Creating a DESeq2 object [TBA]</li>
        <li class="dropdown-header">- PCA [TBA]</li>
        <li class="dropdown-header">- Differential expression analysis [TBA]</li>
        <li class="dropdown-header">- GO enrichment analysis [TBA]</li>
        <li class="dropdown-header">- KEGG enrichment analysis [TBA]</li>
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reference-material" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Reference material</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-reference-material">    
        <li class="dropdown-header">Specific tutorials</li>
        <li>
    <a class="dropdown-item" href="../info/osc_transfer.html" rel="" target="">
 <span class="dropdown-text">- File transfer to and from OSC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../info/osc_ssh.html" rel="" target="">
 <span class="dropdown-text">- Using OSC with SSH</span></a>
  </li>  
        <li class="dropdown-header">General info</li>
        <li>
    <a class="dropdown-item" href="../info/shell_commands.html" rel="" target="">
 <span class="dropdown-text">- Shell commands overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../info/shell_shortcuts.html" rel="" target="">
 <span class="dropdown-text">- Shell keyboard shortcuts</span></a>
  </li>  
        <li class="dropdown-header">- Further Resources</li>
        <li class="dropdown-header">- Glossary</li>
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../info/about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mcic-osu/rnaseq-intro" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#ondemand-files-menu" id="toc-ondemand-files-menu" class="nav-link" data-scroll-target="#ondemand-files-menu"><span class="header-section-number">2</span> OnDemand Files menu</a></li>
  <li><a href="#remote-transfer-commands" id="toc-remote-transfer-commands" class="nav-link" data-scroll-target="#remote-transfer-commands"><span class="header-section-number">3</span> Remote transfer commands</a>
  <ul class="collapse">
  <li><a href="#scp" id="toc-scp" class="nav-link" data-scroll-target="#scp"><span class="header-section-number">3.1</span> <code>scp</code></a></li>
  <li><a href="#rsync" id="toc-rsync" class="nav-link" data-scroll-target="#rsync"><span class="header-section-number">3.2</span> <code>rsync</code></a></li>
  </ul></li>
  <li><a href="#sftp" id="toc-sftp" class="nav-link" data-scroll-target="#sftp"><span class="header-section-number">4</span> SFTP</a>
  <ul class="collapse">
  <li><a href="#logging-in" id="toc-logging-in" class="nav-link" data-scroll-target="#logging-in"><span class="header-section-number">4.1</span> Logging in</a></li>
  <li><a href="#uploading-files-to-osc" id="toc-uploading-files-to-osc" class="nav-link" data-scroll-target="#uploading-files-to-osc"><span class="header-section-number">4.2</span> Uploading files to OSC</a></li>
  <li><a href="#downloading-files-from-osc" id="toc-downloading-files-from-osc" class="nav-link" data-scroll-target="#downloading-files-from-osc"><span class="header-section-number">4.3</span> Downloading files from OSC</a></li>
  <li><a href="#exiting" id="toc-exiting" class="nav-link" data-scroll-target="#exiting"><span class="header-section-number">4.4</span> Exiting</a></li>
  </ul></li>
  <li><a href="#globus" id="toc-globus" class="nav-link" data-scroll-target="#globus"><span class="header-section-number">5</span> Globus</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/mcic-osu/rnaseq-intro/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Transferring files to and from OSC</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jelmer Poelstra </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 18, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<hr>
<p><br></p>
<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>There are several ways of transferring files between your computer and OSC:</p>
<table class="table">
<colgroup>
<col style="width: 30%">
<col style="width: 20%">
<col style="width: 16%">
<col style="width: 13%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Transfer size</th>
<th>CLI or GUI</th>
<th>Ease of use</th>
<th>Flexibility/options</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>OnDemand Files menu</strong></td>
<td>smaller (&lt;1GB)</td>
<td>GUI</td>
<td>Easy</td>
<td>Limited</td>
</tr>
<tr class="even">
<td><strong>Remote transfer commands</strong></td>
<td>smaller (&lt;1GB)</td>
<td>CLI</td>
<td>Moderate</td>
<td>Extensive</td>
</tr>
<tr class="odd">
<td><strong>SFTP</strong></td>
<td>larger (&gt;1GB)</td>
<td>Either</td>
<td>Moderate</td>
<td>Limited</td>
</tr>
<tr class="even">
<td><strong>Globus</strong></td>
<td>larger (&gt;1GB)</td>
<td>GUI</td>
<td>Moderate <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></td>
<td>Extensive</td>
</tr>
</tbody>
</table>
<p>This page will cover each of those in more detail below.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Download directly from the web using commands at OSC
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you need files that are at a publicly accessible location on the internet (for example, NCBI reference genome data), you don’t need to download these to your computer and <em>then</em> upload them to OSC.</p>
<p><strong>Instead, you can use commands for downloading files</strong> directly to OSC, like <code>wget</code> or <code>curl</code>. This will be covered in one of the main sessions.</p>
</div>
</div>
<p><br></p>
</section>
<section id="ondemand-files-menu" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="ondemand-files-menu"><span class="header-section-number">2</span> OnDemand Files menu</h2>
<p>For small transfers (below roughly 1 GB), you might find it easiest to use the Upload and Download buttons in the <strong>OSC OnDemand</strong> “Files” menu — their usage should be pretty intuitive.</p>
<p align="center">
<img src="img/ondemand_transfer.png" width="80%">
</p>
<p><br></p>
</section>
<section id="remote-transfer-commands" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="remote-transfer-commands"><span class="header-section-number">3</span> Remote transfer commands</h2>
<p>For small transfers, you can also use a <strong>remote transfer command</strong> like <code>scp</code>, or a more advanced one like <code>rsync</code> or <code>rclone</code>. Such commands can provide a more convenient transfer method than OnDemand if you want to keep certain directories synced between OSC and your computer.</p>
<p>The reason you shouldn’t use this for very large transfers is that the transfer will happen using a login node.</p>
<section id="scp" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="scp"><span class="header-section-number">3.1</span> <code>scp</code></h3>
<p>One option is <code>scp</code> (secure copy), which works much like the regular <code>cp</code> command, including that you’ll need <code>-r</code> for recursive transfers.</p>
<p>The key difference is that we have to somehow refer to a path on a remote computer, and we do so by starting with the remote computer’s address, followed by <code>:</code>, and then the path:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy from remote (OSC) to local (your computer):</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> <span class="op">&lt;</span>user<span class="op">&gt;</span>@pitzer.osc.edu:<span class="op">&lt;</span>remote-path<span class="op">&gt;</span> <span class="op">&lt;</span>local-path<span class="op">&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy from local (your computer) to remote (OSC)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> <span class="op">&lt;</span>local-path<span class="op">&gt;</span> <span class="op">&lt;</span>user<span class="op">&gt;</span>@pitzer.osc.edu:<span class="op">&lt;</span>remote-path<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here are two examples of copying from OSC to your local computer:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy a file from OSC to a local computer - namely, to your current working dir ('.'):</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> jelmer@pitzer.osc.edu:/fs/ess/PAS0471/jelmer/mcic-scripts/misc/fastqc.sh .</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy a directory from OSC to a local computer - namely, to your home dir ('~'):</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> <span class="at">-r</span> jelmer@pitzer.osc.edu:/fs/ess/PAS0471/jelmer/mcic-scripts ~</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And two examples of copying from your local computer to OSC:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy a file from your computer to OSC --</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># namely, a file in from your current working dir to your home dir at OSC:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> fastqc.sh jelmer@pitzer.osc.edu:~</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy a file from my local computer's Desktop to the Scratch dir for PAS0471:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> /Users/poelstra.1/Desktop/fastqc.sh jelmer@pitzer.osc.edu:/fs/scratch/PAS0471</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Some nuances for remote copying:</p>
<ul>
<li><p>As the above code implies, in both cases (remote-to-local and local-to-remote), you will <strong>issue the copying commands from your local computer.</strong></p></li>
<li><p>For the remote computer (OSC), the <strong>path should always be absolute</strong>, whereas that for your local computer can be either relative or absolute.</p></li>
<li><p>Since all files can be accessed at the same paths at Pitzer and at Owens, it doesn’t matter whether you use <code>@pitzer.osc.edu</code> or <code>@owens.osc.edu</code> in the <code>scp</code> command.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Transferring directly to and from OneDrive
</div>
</div>
<div class="callout-body-container callout-body">
<p>If your OneDrive is mounted on or synced to your local computer (i.e., if you can see it in your computer’s file brower), you can also transfer directly between OSC and OneDrive.</p>
<p>For example, the path to my OneDrive files on my laptop is:<br>
<code>/Users/poelstra.1/Library/CloudStorage/OneDrive-TheOhioStateUniversity</code>.<br>
So if I had a file called <code>fastqc.sh</code> in my top-level OneDrive dir, I could transfer it to my Home dir at OSC as follows:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> /Users/poelstra.1/Library/CloudStorage/OneDrive-TheOhioStateUniversity jelmer@pitzer.osc.edu:~</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><br></p>
</section>
<section id="rsync" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="rsync"><span class="header-section-number">3.2</span> <code>rsync</code></h3>
<p>Another option, which I can recommend, is the <code>rsync</code> command, especially when you have directories that you repeatedly want to sync: <strong><code>rsync</code> won’t copy any files that are identical in source and destination</strong>.</p>
<p>A useful combination of options is <code>-avz --progress</code>:</p>
<ul>
<li><code>-a</code> enables archival mode (among other things, this makes it work recursively).</li>
<li><code>-v</code> increases verbosity — tells you what is being copied.</li>
<li><code>-z</code> enables compressed file transfer (=&gt; generally faster).</li>
<li><code>--progress</code> to show transfer progress for individual files.</li>
</ul>
<p>The way to refer to remote paths is the same as with <code>scp</code>. For example, I could copy a <code>dir_with_results</code> in my local Home dir to my OSC Home dir as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rsync</span> <span class="at">-avz</span> <span class="at">--progress</span> ~/dir_with_results jelmer@owens.osc.edu:~</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Trailing slashes in <code>rsync</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>One tricky aspect of using <code>rsync</code> is that the presence/absence of a <strong>trailing slash for source directories</strong> makes a difference for its behavior. The following commands work as intended — to create a backup copy of a <code>scripts</code> dir inside a dir called <code>backup</code><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With trailing slash: copy the *contents* of source "scripts" into target "scripts":</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rsync</span> <span class="at">-avz</span> scripts/ backup/scripts</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Without trailing slash: copy the source dir "scripts" into target dir "backup"</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rsync</span> <span class="at">-avz</span> scripts backup</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But these commands don’t:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This would result in a dir 'backup/scripts/scripts':</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rsync</span> <span class="at">-avz</span> scripts backup/scripts</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># This would copy the files in "scripts" straight into "backup":</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rsync</span> <span class="at">-avz</span> scripts/ backup</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><br></p>
</section>
</section>
<section id="sftp" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="sftp"><span class="header-section-number">4</span> SFTP</h2>
<p>The first of two options for larger transfers is <strong>SFTP</strong>. You can use the <strong><code>sftp</code> command</strong> when you have access to a Unix shell on your computer, and this what I’ll cover below.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
SFTP with a GUI
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you have Windows without e.g.&nbsp;<a href="https://learn.microsoft.com/en-us/windows/wsl/install">WSL</a> or Git Bash (see the top of the <a href="../info/osc_ssh.html">SSH page on this site</a> for more details), you can use a GUI-based SFTP client instead like <a href="https://winscp.net/eng/index.php">WinSCP</a>, <a href="https://cyberduck.io/">Cyberduck</a>, or <a href="https://filezilla-project.org">FileZilla</a>. CyberDuck also works on Mac, and FileZilla works on all operating systems, if you prefer to do SFTP transfers with a GUI, but I won’t cover their usage here.</p>
</div>
</div>
<section id="logging-in" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="logging-in"><span class="header-section-number">4.1</span> Logging in</h3>
<p>To log in to OSC’s SFTP server, issue the following command in your local computer’s terminal, substituting <code>&lt;user&gt;</code> by your OSC username:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">sftp</span> <span class="op">&lt;</span>user<span class="op">&gt;</span>@sftp.osc.edu   <span class="co"># E.g., 'jelmer@sftp.osc.edu'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>The authenticity of host 'sftp.osc.edu (192.148.247.136)' can't be established.
ED25519 key fingerprint is SHA256:kMeb1PVZ1XVDEe2QiSumbM33w0SkvBJ4xeD18a/L0eQ.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])?</code></pre>
<p>If this is your first time connecting to OSC SFTP server, you’ll get a message like the one shown above: you should type <code>yes</code> to confirm.</p>
<p>Then, you may be asked for your OSC password, and after that, you should see a “welcome” message like this:</p>
<pre class="bash-out"><code>******************************************************************************

This system is for the use of authorized users only.  Individuals using
this computer system without authority, or in excess of their authority,
are subject to having all of their activities on this system monitored
and recorded by system personnel.  In the course of monitoring individuals
improperly using this system, or in the course of system maintenance,
the activities of authorized users may also be monitored.  Anyone using
this system expressly consents to such monitoring and is advised that if
such monitoring reveals possible evidence of criminal activity, system
personnel may provide the evidence of such monitoring to law enforcement
officials.

******************************************************************************
Connected to sftp.osc.edu.</code></pre>
<p>Now, you will have an <code>sftp</code> prompt (<code>sftp&gt;</code>) instead of a regular shell prompt.</p>
<p>Familiar commands like <code>ls</code>, <code>cd</code>, and <code>pwd</code> will operate on the remote computer (OSC, in this case), and there are <strong>local counterparts for them: <code>lls</code>, <code>lcd</code>, <code>lpwd</code></strong> — for example:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: I am prefacing sftp commands with the 'sftp&gt;' prompt to make it explicit</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#       these should be issued in an sftp session; but don't type that part.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="ex">sftp</span><span class="op">&gt;</span> pwd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>Remote working directory: /users/PAS0471/jelmer</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">sftp</span><span class="op">&gt;</span> lpwd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="bash-out"><code>Local working directory: /Users/poelstra.1/Desktop</code></pre>
</section>
<section id="uploading-files-to-osc" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="uploading-files-to-osc"><span class="header-section-number">4.2</span> Uploading files to OSC</h3>
<p>To upload files to OSC, use <code>sftp</code>’s <strong><code>put</code> command</strong>.</p>
<p>The syntax is <code>put &lt;local-path&gt; &lt;remote-path&gt;</code>, and unlike with <code>scp</code> etc., you don’t need to include the address to the remote (because in an <code>stfp</code> session, you are simultaneously connected to both computers). But like with <code>cp</code> and <code>scp</code>, you’ll need the <code>-r</code> flag for recursive transfers, i.e.&nbsp;transferring a directory and its contents.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Upload fastqc.sh in a dir 'scripts' on your local computer to the PAS0471 Scratch dir:</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">sftp</span><span class="op">&gt;</span> put scripts/fastqc.sh /fs/scratch/PAS0471/sandbox</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use -r to transfer directories:</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="ex">sftp</span><span class="op">&gt;</span> put <span class="at">-r</span> scripts /fs/scratch/PAS0471/sandbox</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># You can use wildcards to upload multiple files:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="ex">sftp</span><span class="op">&gt;</span> put scripts/<span class="pp">*</span>sh /fs/scratch/PAS0471/sandbox</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>sftp</code> is primitive
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>~</code> shortcut to your Home directory does not work in <code>sftp</code>!</p>
<p><code>sftp</code> is generally quite primitive and you also cannot use, for example, tab completion or the recalling of previous commands with the up arrow.</p>
</div>
</div>
</section>
<section id="downloading-files-from-osc" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="downloading-files-from-osc"><span class="header-section-number">4.3</span> Downloading files from OSC</h3>
<p>To download files from OSC, use the <code>get</code> command, which has the syntax <code>get &lt;remote-path&gt; &lt;local-path&gt;</code> (this is the other way around from <code>put</code> in that the remote path comes first, but the same in that both use the order <code>&lt;source&gt; &lt;target&gt;</code>, like <code>cp</code> and so on).</p>
<p>For example:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">sftp</span><span class="op">&gt;</span> get /fs/scratch/PAS0471/mcic-scripts/misc/fastqc.sh .</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="ex">sftp</span><span class="op">&gt;</span> get <span class="at">-r</span> /fs/scratch/PAS0471/sandbox/ .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="exiting" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="exiting"><span class="header-section-number">4.4</span> Exiting</h3>
<p>When you’re done, you can type <code>exit</code> or press <kbd>Ctrl</kbd>+<kbd>D</kbd> to exit the <code>sftp</code> prompt.</p>
<p><br></p>
</section>
</section>
<section id="globus" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="globus"><span class="header-section-number">5</span> Globus</h2>
<p>The second option for large transfers is <strong>Globus</strong>, which has a browser-based GUI, and is especially your best bet for very large transfers. Some advantages of using Globus are that:</p>
<ul>
<li>It checks whether all files were transferred correctly and completely</li>
<li>It can pause and resume automatically when you e.g.&nbsp;turn off your computer for a while</li>
<li>It can be used to share files from OSC directly with collaborators even at different institutions.</li>
</ul>
<p>Globus does need some setup, including the installation of a piece of software that will run in the background on your computer.</p>
<ul>
<li>Globus installation and configuration instructions: <a href="https://docs.globus.org/how-to/globus-connect-personal-windows">Windows</a> / <a href="https://docs.globus.org/how-to/globus-connect-personal-mac">Mac</a> / <a href="https://docs.globus.org/how-to/globus-connect-personal-linux">Linux</a></li>
<li><a href="https://docs.globus.org/how-to/get-started/">Globus transfer instructions</a></li>
<li><a href="https://www.osc.edu/resources/getting_started/howto/howto_use_globus_overview">OSC’s page on Globus</a></li>
</ul>
<p><br><br></p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>But the initial setup for Globus is quite involved and a bit counterintuitive.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>For simplicity, these commands are copying between local dirs, which is also possible with <code>rsync</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">2023, Jelmer Poelstra</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mcic-osu/rnaseq-intro">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>