<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jelmer Poelstra">
<meta name="dcterms.date" content="2023-07-18">

<title>OSC Intro</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">RNAseq analysis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text"><i class="fa-solid fa-home" aria-label="home"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../modules/intro.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-a.-computing-skills" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">A. Computing skills</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-a.-computing-skills">    
        <li>
    <a class="dropdown-item" href="../modules/A01_osc.html" rel="" target="">
 <span class="dropdown-text">A1. OSC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/A02_vscode.html" rel="" target="">
 <span class="dropdown-text">A2. VS Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/A03_shell1.html" rel="" target="">
 <span class="dropdown-text">A3. Unix shell I</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/A04_shell2.html" rel="" target="">
 <span class="dropdown-text">A4. Unix shell II</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/A05_fastq.html" rel="" target="">
 <span class="dropdown-text">A5. FASTQ files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/A06_ref-files.html" rel="" target="">
 <span class="dropdown-text">A6. Reference genome files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/A07_overview.html" rel="" target="">
 <span class="dropdown-text">A7. Next steps, variables &amp; loops</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/A08_scripts.html" rel="" target="">
 <span class="dropdown-text">A8. Shell scripts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/A09_software.html" rel="" target="">
 <span class="dropdown-text">A9. Software at OSC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../modules/A10_slurm.html" rel="" target="">
 <span class="dropdown-text">A10. SLURM compute jobs</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-b.-from-reads-to-counts" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">B. From reads to counts</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-b.-from-reads-to-counts">    
        <li>
    <a class="dropdown-item" href="../modules/B01_fastqc.html" rel="" target="">
 <span class="dropdown-text">B1. Read QC with <em>FastQC</em></span></a>
  </li>  
        <li class="dropdown-header">B2. Summarizing QC results with <em>MultiQC</em> [TBA]</li>
        <li class="dropdown-header">B3. Trimming with <em>TrimGalore</em> [TBA]</li>
        <li class="dropdown-header">B4. Alignment with <em>STAR</em> [TBA]</li>
        <li class="dropdown-header">B5. Quantification with <em>Salmon</em> [TBA]</li>
        <li class="dropdown-header">B6: The Nextflow/nf-core rnaseq workflow [TBA]</li>
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-c.-analyzing-the-counts" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">C. Analyzing the counts</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-c.-analyzing-the-counts">    
        <li class="dropdown-header">C1. Creating a <em>DESeq2</em> object [TBA]</li>
        <li class="dropdown-header">C2. PCA [TBA]</li>
        <li class="dropdown-header">C3. Differential expression analysis [TBA]</li>
        <li class="dropdown-header">C4. GO enrichment analysis [TBA]</li>
        <li class="dropdown-header">C5. KEGG enrichment analysis [TBA]</li>
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reference-material" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Reference material</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-reference-material">    
        <li class="dropdown-header">Specific tutorials</li>
        <li>
    <a class="dropdown-item" href="../info/osc_transfer.html" rel="" target="">
 <span class="dropdown-text">- File transfer to and from OSC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../info/osc_ssh.html" rel="" target="">
 <span class="dropdown-text">- Using OSC with SSH</span></a>
  </li>  
        <li class="dropdown-header">General info</li>
        <li>
    <a class="dropdown-item" href="../info/shell_commands.html" rel="" target="">
 <span class="dropdown-text">- Shell commands overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../info/shell_shortcuts.html" rel="" target="">
 <span class="dropdown-text">- Shell keyboard shortcuts</span></a>
  </li>  
        <li class="dropdown-header">- Further Resources</li>
        <li class="dropdown-header">- Glossary</li>
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../info/about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mcic-osu/rnaseq-intro" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#supercomputers" id="toc-supercomputers" class="nav-link" data-scroll-target="#supercomputers"><span class="header-section-number">1.1</span> Supercomputers</a></li>
  <li><a href="#the-ohio-supercomputer-center-osc" id="toc-the-ohio-supercomputer-center-osc" class="nav-link" data-scroll-target="#the-ohio-supercomputer-center-osc"><span class="header-section-number">1.2</span> The Ohio Supercomputer Center (OSC)</a></li>
  </ul></li>
  <li><a href="#the-structure-of-a-supercomputer-center" id="toc-the-structure-of-a-supercomputer-center" class="nav-link" data-scroll-target="#the-structure-of-a-supercomputer-center"><span class="header-section-number">2</span> The Structure of a Supercomputer Center</a>
  <ul class="collapse">
  <li><a href="#file-systems" id="toc-file-systems" class="nav-link" data-scroll-target="#file-systems"><span class="header-section-number">2.1</span> File Systems</a></li>
  <li><a href="#login-nodes" id="toc-login-nodes" class="nav-link" data-scroll-target="#login-nodes"><span class="header-section-number">2.2</span> Login Nodes</a></li>
  <li><a href="#compute-nodes" id="toc-compute-nodes" class="nav-link" data-scroll-target="#compute-nodes"><span class="header-section-number">2.3</span> Compute Nodes</a></li>
  <li><a href="#putting-it-together" id="toc-putting-it-together" class="nav-link" data-scroll-target="#putting-it-together"><span class="header-section-number">2.4</span> Putting it together</a></li>
  </ul></li>
  <li><a href="#connecting-to-osc-with-ondemand" id="toc-connecting-to-osc-with-ondemand" class="nav-link" data-scroll-target="#connecting-to-osc-with-ondemand"><span class="header-section-number">3</span> Connecting to OSC with OnDemand</a>
  <ul class="collapse">
  <li><a href="#file-system-access" id="toc-file-system-access" class="nav-link" data-scroll-target="#file-system-access"><span class="header-section-number">3.1</span> File System Access</a></li>
  <li><a href="#system-status-in-clusters" id="toc-system-status-in-clusters" class="nav-link" data-scroll-target="#system-status-in-clusters"><span class="header-section-number">3.2</span> System Status (in Clusters)</a></li>
  <li><a href="#unix-shell-access-in-clusters" id="toc-unix-shell-access-in-clusters" class="nav-link" data-scroll-target="#unix-shell-access-in-clusters"><span class="header-section-number">3.3</span> Unix Shell Access (in Clusters)</a></li>
  <li><a href="#interactive-apps" id="toc-interactive-apps" class="nav-link" data-scroll-target="#interactive-apps"><span class="header-section-number">3.4</span> Interactive Apps</a></li>
  </ul></li>
  <li><a href="#upcoming-sessions-on-osc" id="toc-upcoming-sessions-on-osc" class="nav-link" data-scroll-target="#upcoming-sessions-on-osc"><span class="header-section-number">4</span> Upcoming sessions on OSC</a></li>
  <li><a href="#at-home-reading-admin-further-resources" id="toc-at-home-reading-admin-further-resources" class="nav-link" data-scroll-target="#at-home-reading-admin-further-resources">At-home reading: admin &amp; further resources</a>
  <ul class="collapse">
  <li><a href="#administrative-miscellaneae" id="toc-administrative-miscellaneae" class="nav-link" data-scroll-target="#administrative-miscellaneae">Administrative miscellaneae</a></li>
  <li><a href="#oscs-learning-resources" id="toc-oscs-learning-resources" class="nav-link" data-scroll-target="#oscs-learning-resources">OSC’s learning resources</a></li>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link" data-scroll-target="#acknowledgements">Acknowledgements</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/mcic-osu/rnaseq-intro/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Intro to the Ohio Supercomputer Center (OSC)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jelmer Poelstra </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 18, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<hr>
<p align="center">
<img src="img/osc_logo.png" width="70%">
</p>
<p><br></p>
<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>This session will provide an introduction to supercomputers in general and to the Ohio Supercomputer Center (OSC) specifically.</p>
<section id="supercomputers" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="supercomputers"><span class="header-section-number">1.1</span> Supercomputers</h3>
<p>A <strong>supercomputer</strong> (also known as a “compute cluster” or simply a “<strong>cluster</strong>”) consists of many computers that are connected by a high-speed network, and that can be accessed remotely by its users. In more general terms, supercomputers provide high-performance computing (<strong>HPC</strong>) resources.</p>
<p>Here are some possible reasons to use a supercomputer instead of your own laptop or desktop:</p>
<ul>
<li>Your analyses take a long time to run.</li>
<li>You analyses need large numbers of CPUs or a large amount of memory.</li>
<li>You need to run some analyses many times.</li>
<li>You need to store a lot of data.</li>
<li>Your analyses require specialized hardware, such as GPUs.</li>
<li>Your analyses require software available only for the Linux operating system, but you use Windows.</li>
</ul>
<p>When you’re working RNAseq data or other kinds of genomic data, many of these reasons apply. This can make it hard or simply impossible to do all your work on your personal workstation, and supercomputers provide a solution.</p>
</section>
<section id="the-ohio-supercomputer-center-osc" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="the-ohio-supercomputer-center-osc"><span class="header-section-number">1.2</span> The Ohio Supercomputer Center (OSC)</h3>
<p>The Ohio Supercomputer Center (OSC) is a facility provided by the state of Ohio (not The Ohio State University). It has two supercomputers, lots of storage space, and an excellent infrastructure for accessing these resources. At least for folks at OSU, using OSC is currently usually <a href="#administrative-miscellaneae"><strong>free in practice</strong></a>. Having such a good HPC resource available at no cost is not something we should take for granted — at many institutions, academics not only have have to pay for these kinds of resources, but those are often more limited and not as easy to access.</p>
<p>In <strong>upcoming sessions</strong>, we’ll continue to work at OSC, so you will get a fair bit of experience with using it. We’ll also have specific sessions dedicated to <a href="../modules/A02_vscode.html">using VS Code at OSC</a>, <a href="../modules/A09_software.html">loading and installing software at OSC</a> and <a href="../modules/A10_slurm.html">using the <em>Slurm</em> job scheduler</a>.</p>
<p>OSC has <strong>three main websites</strong>:</p>
<ul>
<li><a href="https://osc.edu" class="uri">https://osc.edu</a>: OSC’s general website, with lots of information about the supercomputers, the software that’s installed, and how to use OSC.</li>
<li><a href="https://ondemand.osc.edu" class="uri">https://ondemand.osc.edu</a>: A web portal to use OSC resources through your browser (login needed).</li>
<li><a href="https://my.osc.edu" class="uri">https://my.osc.edu</a>: A site to manage your account and OSC Projects you are an admin for (login needed).</li>
</ul>
<p><br></p>
</section>
</section>
<section id="the-structure-of-a-supercomputer-center" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="the-structure-of-a-supercomputer-center"><span class="header-section-number">2</span> The Structure of a Supercomputer Center</h2>
<p>Let’s start with some terminology, going from smaller things to bigger things:</p>
<ul>
<li><strong>Core / Processor / CPU / Thread</strong> — Components of a computer that can each (semi-)indendepently be asked to perform a computing task like running a bioinformatics program. While these terms are not technically all synonyms, we can treat them as such for our purposes.</li>
<li><strong>Node</strong> — A single computer that is a part of a supercomputer and has dozens of cores (i.e., they tend to be more powerful than a personal laptop or desktop).</li>
<li><strong>Supercomputer / Cluster</strong> — Many computers connected by a high-speed network. (“Pitzer” and “Owens” are the two currently active ones at OSC.)</li>
<li><strong>Supercomputer Center</strong> — A facility like OSC that has one or more supercomputers.</li>
</ul>
<p align="center">
<img src="img/terminology.png" width="95%">
</p>
<p>This is what the <strong>Owens</strong> supercomputer at OSC physically looks like:</p>
<p align="center">
<img src="img/owens.jpg" width="70%">
</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Linux and Unix
</div>
</div>
<div class="callout-body-container callout-body">
<p>Like the vast majority of supercomputers, those of OSC run on the <strong>Linux operating system</strong> (as opposed to on MacOS or Windows). In turn, Linux is a <strong>Unix-based</strong> operating system like MacOS (but unlike Windows).</p>
</div>
</div>
<p>We can think of a supercomputer as having three main parts:</p>
<ul>
<li><strong>File Systems</strong>: Where files are stored (these are shared between the two clusters!)</li>
<li><strong>Login Nodes</strong>: The handful of computers everyone shares after logging in</li>
<li><strong>Compute Nodes</strong>: The many computers you can reserve to run your analyses</li>
</ul>
<p align="center">
<img src="img/cluster_overview_ed.png" width="95%">
</p>
<p>Let’s take those in order.</p>
<p><br></p>
<section id="file-systems" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="file-systems"><span class="header-section-number">2.1</span> File Systems</h3>
<p>There are 4 main file systems where you can store files at OSC: Home Directories, Project Directories, Scratch Directories, and Compute storage.</p>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 19%">
<col style="width: 19%">
<col style="width: 12%">
<col style="width: 19%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>File system</th>
<th>Located within</th>
<th>Quota</th>
<th>Backed up?</th>
<th>Auto-purged?</th>
<th>One for each…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Home</strong></td>
<td><code>/users/</code></td>
<td>500 GB / 1 M files</td>
<td>Yes</td>
<td>No</td>
<td>User</td>
</tr>
<tr class="even">
<td><strong>Project</strong></td>
<td><code>/fs/ess/</code> <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></td>
<td>Flexible</td>
<td>Yes</td>
<td>No</td>
<td>OSC Project</td>
</tr>
<tr class="odd">
<td><strong>Scratch</strong></td>
<td><code>/fs/scratch/</code> <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></td>
<td>100 TB</td>
<td>No</td>
<td>After 90 days</td>
<td>OSC Project</td>
</tr>
<tr class="even">
<td><strong>Compute</strong></td>
<td><code>$TMPDIR</code></td>
<td>1 TB</td>
<td>No</td>
<td>After job completes</td>
<td>Compute job</td>
</tr>
</tbody>
</table>
<p>You’ll interact most with the <strong>Project directories</strong>: this is because for most files, you’ll want a permanent and backed-up location (i.e., not Scratch or Compute storage), and the Home directory offers relatively limited storage as well as challenges with file sharing.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Unix terminology and environment variables
</div>
</div>
<div class="callout-body-container callout-body">
<p>We’ll talk about all of this more in upcoming sessions, but to clarify some of the terms and concepts mentioned here:</p>
<ul>
<li>“<strong>Directory</strong>” (or “<strong>dir</strong>” for short) is a commonly used term in Unix that just means “folder”.</li>
<li>In the “Located within” column in the table above, the leading forward slash <strong><code>/</code></strong> signifies the system’s <strong>“root” (top-level) directory</strong>, and forward slashes are also used to <em>separate directories</em> (unlike in Windows, which uses backslashes).</li>
<li>File and directory locations on a computer are often referred to as “<strong>paths</strong>”.</li>
<li><code>$TMPDIR</code> is a so-called “<strong>environment variable</strong>” that contains the path to the Compute storage directory (in the Unix shell, all <em>variables</em> are referenced by putting a <code>$</code> before their name, and <em>environment</em> variables are in all-caps). A variable is useful in this case, because the location of this storage space will vary depending on the compute node at which it’s located. Along similar lines, your Home directory’s path is stored in <code>$HOME</code>.</li>
</ul>
</div>
</div>
<section id="home-directory" class="level4" data-number="2.1.1">
<h4 data-number="2.1.1" class="anchored" data-anchor-id="home-directory"><span class="header-section-number">2.1.1</span> Home Directory</h4>
<p>When you initially get an account with OSC, a Home directory is created for you, named with your OSC username. This directory will always be within <code>/users/</code>, and then, somewhat strangely, in a directory containing the name of the OSC Project you were first added to (and this will not change even if you’re no longer a member of that project, or if that project ceases to exist). For example, my Home directory is <code>/users/PAS0471/jelmer</code>.</p>
<p>You will only ever have <strong>one</strong> Home directory. You also <strong>cannot expand</strong> the standard 500 GB of storage — if you need more space, you should turn to your <em>Project</em> directories.</p>
<p>If possible, I recommend to use your Home directory only for some <strong>general files</strong> (like some software, tutorials and practice, general scripts and databases), and to use Project directories for all your research project data and results.</p>
</section>
<section id="project-directories" class="level4" data-number="2.1.2">
<h4 data-number="2.1.2" class="anchored" data-anchor-id="project-directories"><span class="header-section-number">2.1.2</span> Project Directories</h4>
<p>Project directories are linked to OSC projects, which are typically set up by PIs. They offer <strong>flexibility</strong> in terms of the amount of storage available, and also in terms of who can access files in the directory.</p>
<p>By default, all members of an OSC Project have “read access” (the ability to see and copy files) for all files in a project directory, which makes it <strong>suitable for collaborating</strong> on a research project. But rest assured: except for OSC staff, other people can never move, modify, or delete your files (i.e., they don’t have “write access”) — not even the admins (PIs) for the OSC Project in question.</p>
<p>Like Home directories, Project directories are <strong>backed up</strong> daily. You don’t have <em>direct</em> access to the backups, but if you’ve accidentally deleted some important files (Linux has no thrash bin!), you can request them to be restored to the way they were on a specific date.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
File Systems are shared among the clusters
</div>
</div>
<div class="callout-body-container callout-body">
<p>While OSC’s current two clusters, <strong>Owens</strong> and <strong>Pitzer</strong>, are largely separate, they do share the same File System. This means that you can access your files in the exact same way regardless of which supercomputer you have connected to.</p>
<p>For example, your Home directory can be accessed using the same path (in my case, <code>/users/PAS0471/jelmer</code>) on Pitzer and Owens.</p>
</div>
</div>
</section>
<section id="temporary-storage-scratch-and-compute" class="level4" data-number="2.1.3">
<h4 data-number="2.1.3" class="anchored" data-anchor-id="temporary-storage-scratch-and-compute"><span class="header-section-number">2.1.3</span> Temporary storage: Scratch and Compute</h4>
<p>Every OSC Project also has a Scratch directory. The two main advantages of Scratch space are that it is <strong>effectively unlimited</strong> and that it has <strong>faster</strong> data read and write (“I/O”) speed than Home and Project space. However, it’s not backed up, and files that are unmodified for 90 days are automatically deleted. As such, Scratch storage is mostly useful for intermediate results that are likely not needed again and can be reproduced easily.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p><strong>Compute</strong> storage space is even more fleeting: as soon as the compute “job” in question has stopped (e.g.&nbsp;your script has finished), these files will be deleted. We’ll talk a bit more about this type of storage later, as using them can save time for I/O-intensive analyses.</p>
<p><br></p>
</section>
</section>
<section id="login-nodes" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="login-nodes"><span class="header-section-number">2.2</span> Login Nodes</h3>
<p>Login nodes are set aside as an initial landing spot for everyone who logs in to a supercomputer. There are only a handful of them on each supercomputer, and they are shared among everyone and cannot be “reserved”.</p>
<p>As such, login nodes are meant only to do things like organizing your files and creating scripts for compute jobs, and are <strong><em>not</em> meant for any serious computing</strong>.</p>
<p>Attempting large computing efforts on these nodes risks taxing the limited resources on these nodes, and bogging things down for everyone. There are checks built in that limit what you are able to do on the login nodes (i.e.&nbsp;jobs running for longer than 20 minutes will be killed), but it’s best to just not push it at all. Any serious computing should be done on the compute nodes.</p>
<p><br></p>
</section>
<section id="compute-nodes" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="compute-nodes"><span class="header-section-number">2.3</span> Compute Nodes</h3>
<p>Compute nodes are really the powerhouse of the supercomputer, and this is where you run your data processing and analysis.</p>
<p>You can use compute nodes by putting in requests for resources, such as the number of nodes, cores, and for how long you will need them. Because many different users are sending such requests –i.e., for “compute jobs” or just “<strong>jobs</strong>”– all the time, there is software called a <strong>job scheduler</strong> (specifically, <em>Slurm</em> in case of OSC) that considers each request and assigns the necessary resources to the job as they become available.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Interactive and batch use of compute nodes
</div>
</div>
<div class="callout-body-container callout-body">
<p>Requests for compute node jobs can be made either through the OnDemand website or with commands like <code>sinteractive</code> and <code>sbatch</code>.</p>
<p>For instance, when we start an RStudio session at OSC, we first have to fill out a little form with such a request, and then RStudio will run on a compute node. This is an example of using a compute node <strong>interactively</strong> — “you” are located on a compute node, and any R command you type will be executed there. More commonly for genomics work, you’ll be using compute nodes <strong>non-interactively, that is, through “batch jobs”</strong>. When doing so, you will write a script in advance and send it to the job scheduler, which will run the script on a compute node that “you” don’t go to at all.</p>
<p>The session <a href="../modules/A10_slurm.html">Compute Jobs with <em>Slurm</em></a> is dedicated to this topic.</p>
</div>
</div>
<p><strong>Compute nodes come in different shapes and sizes.</strong> <em>“Standard nodes”</em> are by far the most numerous (e.g., Owens has 648 and Pitzer has 564 of them) and even those vary in size, from 28 cores per node (Owens) to 48 cores per node (the “expansion” part of Pitzer). Some examples of other types of nodes are ones with extra memory (<code>largemem</code> and <code>hugemem</code>) and ones that provide access to GPUs (Graphical Processing Units) rather than CPUs.</p>
<p>Fortunately, you don’t tend to have to think much about node types as you start using OSC, since Standard nodes are automatically picked by default, and those will serve you well for the vast of majority genomics analysis.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Memory versus storage
</div>
</div>
<div class="callout-body-container callout-body">
<p>When we talk about “memory”, this refers to RAM: the data that your computer has actively “loaded” or in use. For example, if you play a computer game or have many browser tabs open, your computer’s memory will be heavily used. Genomics programs sometimes load all of the input data from disk to memory for fast access, or hold a huge assembly graph in memory, and as such may need a lot of memory as well.</p>
<p>Don’t confuse memory with file storage, the data that is on disk, some of which may have been unused for years.</p>
</div>
</div>
<p><br></p>
</section>
<section id="putting-it-together" class="level3" data-number="2.4">
<h3 data-number="2.4" class="anchored" data-anchor-id="putting-it-together"><span class="header-section-number">2.4</span> Putting it together</h3>
<p>All these parts are connected together to create a supercomputer — for example, let’s take a look at the specs for Owens now that we understand the components a bit better:</p>
<p align="center">
<img src="img/owens_specs.png" width="95%">
</p>
<p><br></p>
</section>
</section>
<section id="connecting-to-osc-with-ondemand" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="connecting-to-osc-with-ondemand"><span class="header-section-number">3</span> Connecting to OSC with OnDemand</h2>
<p>The classic way of connecting to supercomputers is using SSH, like with the <code>ssh</code> command in a Unix shell on your computer (see <a href="../info/osc_ssh.html">this reference page</a>). However, OSC has pioneered the use of a <strong>web portal called OnDemand</strong>, which has since become more widely used among supercomputer centers.</p>
<p>The OSC OnDemand website, <a href="https://ondemand.osc.edu" class="uri">https://ondemand.osc.edu</a>, then, allows you to access OSC resources through a web browser. When you go there, you first need to <strong>log in</strong> with your OSC (not OSU!) credentials. After that, you should see a landing page similar to the one below:</p>
<p align="center">
<img src="img/ondemand_home.png" width="90%">
</p>
<p>The main part of the page (below the logo) only contains some general OSC messages and updates — what we will focus on instead are some of the options in the <strong>blue bar along the top</strong>.</p>
<p><br></p>
<section id="file-system-access" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="file-system-access"><span class="header-section-number">3.1</span> File System Access</h3>
<p>Let’s start with <strong>Files</strong>. Hovering over this dropdown menu gives a list of directories you have access to. If you’re account is new, you might only have three: a Home directory, and a Project and Scratch directory for one OSC Project.</p>
<p>For every project you’re associated with, directories are added — I’m associated with quite a few different projects, so I have a long list under Files. I’ll select the Project directory for the MCIC’s main OSC Project, <code>PAS0471</code>, which is <code>/fs/ess/PAS0471</code>:</p>
<p align="center">
<img src="img/ondemand_files.png" width="30%">
</p>
<p>Once there, I can see a list of directories and files inside this Project directory, and I can click on the directories to explore the contents further.</p>
<p align="center">
<img src="img/ondemand_projectdir.png" width="90%">
</p>
<p>This interface is <strong>much like the file browser on your own computer</strong>, so you can also create, delete, move and copy files and folders: see the buttons across the top.</p>
<p>Additionally, there are <strong>Upload and Download buttons</strong> for uploading files from your computer to OSC, and downloading them from OSC to your computer. These are only suitable for relatively small transfers, roughly below 1 GB. Other options to transfer files to and from OSC are remote transfer commands like <code>scp</code> (also for smaller transfers), and SFTP or Globus for larger transfers. To learn more about these options, see the <a href="../info/osc_transfer.html"><strong>reference page on OSC file transfer</strong></a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>We will skip the “<strong>Jobs</strong>” dropdown menu in the blue top bar, because in later sessions, we will learn to create, submit, and monitor compute jobs at the command line instead, which quickly becomes more efficient as you get the hang of it.</p>
</div>
</div>
<p><br></p>
</section>
<section id="system-status-in-clusters" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="system-status-in-clusters"><span class="header-section-number">3.2</span> System Status (in Clusters)</h3>
<p>Moving on to “<strong>Clusters</strong>”, we’ll start with the item at the bottom of that dropdown menu, “<strong>System Status</strong>”:</p>
<p align="center">
<img src="img/ondemand_systemstatus_select.png" width="50%">
</p>
<p>This page shows an overview of the current usage of the two clusters, which might help to decide which cluster you want to use and set some expectations for compute job waiting times:</p>
<p align="center">
<img src="img/ondemand_systemstatus.png" width="90%">
</p>
<p><br></p>
</section>
<section id="unix-shell-access-in-clusters" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="unix-shell-access-in-clusters"><span class="header-section-number">3.3</span> Unix Shell Access (in Clusters)</h3>
<p>Interacting with a supercomputer in a point-and-click manner only goes so far. Using a supercomputer effectively requires interacting with the system using a command-line (<strong>CLI</strong>) rather than a graphical user (<strong>GUI</strong>) interface.</p>
<p>Again under the <strong>Clusters</strong> option in the blue top bar, you can access a Unix shell either on Owens or Pitzer:</p>
<p align="center">
<img src="img/ondemand_shell_select.png" width="50%">
</p>
<p>I’m selecting a shell on the Pitzer supercomputer, which will open a new browser tab looking like this:</p>
<p align="center">
<img src="img/ondemand_shell2.png" width="95%">
</p>
<p>We most commonly interact with a supercomputer using a Unix shell, and we’ll learn about the basics of doing so in an <a href="../modules/A03_shell1.html">upcoming session</a>. However, we’ll mostly be accessing a Unix shell in a different manner, namely <strong>inside the VS Code text editor</strong>, which also gives us some additional functionality in a user-friendly way.</p>
</section>
<section id="interactive-apps" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="interactive-apps"><span class="header-section-number">3.4</span> Interactive Apps</h3>
<p>We can get access to VS Code, as well as many other programs with GUIs such as RStudio, via the <strong>Interactive Apps</strong> dropdown menu (and the menu item next to that, <strong>My Interactive Sessions</strong>, will list the sessions that are currently active as well as finished ones).</p>
<p align="center">
<img src="img/ondemand_vscode_select.png" width="32%">
</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
‘VS Code’ versus ‘Code Server’
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the list, the “VS Code” program is called “Code Server”, much like “RStudio” is called “RStudio Server”. They are the same programs but with minor edits to allow them to run remotely in a browser rather than as locally installed on your own computer.</p>
</div>
</div>
<p>“Interactive Apps” like VS Code and RStudio <strong>run on compute nodes</strong> — therefore, we need to fill out a form and specify some details for our interactive compute job request:</p>
<ul>
<li>The <strong><em>OSC Project</em></strong> that should be billed for the compute resource usage — a dropdown menu will list all Projects you are a member of.</li>
<li>The <strong><em>amount of time</em></strong> we want to make a reservation for — we’ll be kicked off as soon as that amount of time has passed!</li>
<li>The <strong>“<em>working directory</em>”</strong> (starting location in the file system) for the program, which we can type in the box <em>or</em> select with the “Select Path” button (the default is your Home directory, here referred to as <code>$HOME</code>).</li>
<li>The <strong>software version</strong> — the most recent available one should be automatically selected, and that is almost always what you’ll want.</li>
</ul>
<p align="center">
<img src="img/ondemand_vscode_form.png" width="60%">
</p>
<p>Click on <strong>Launch</strong> at the bottom and this will send your request to the compute job scheduler. First, your job will be “Queued” — that is, waiting for the job scheduler to allocate resources on the compute nodes to it:</p>
<p align="center">
<img src="img/ondemand_vscode_queued.png" width="90%">
</p>
<p>In general, it should be granted resources within a few seconds (the card will then say “Starting”), and be ready for usage (“Running”) in another couple of seconds:</p>
<p align="center">
<img src="img/ondemand_vscode_running.png" width="90%">
</p>
<p>Then, you can click on the blue <strong>Connect to VS Code</strong> button to open a new browser tab that runs VS Code. We’ll explore VS Code in the <a href="../modules/A02_vscode.html">next session</a>.</p>
<p><br></p>
</section>
</section>
<section id="upcoming-sessions-on-osc" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="upcoming-sessions-on-osc"><span class="header-section-number">4</span> Upcoming sessions on OSC</h2>
<p>Today, we have learned some of the basics of supercomputers and of accessing OSC. In separate sessions in this series, we will look at:</p>
<ul>
<li>Using specific “<strong>Interactive Apps</strong>” (GUI-based programs):
<ul>
<li><a href="../modules/A02_vscode.html"><em>VS Code</em></a></li>
<li><em>RStudio</em> (TBA)</li>
</ul></li>
<li><a href="../modules/A09_software.html">Loading and installing command-line software at OSC</a></li>
<li><a href="../modules/A10_slurm.html">Submitting batch jobs using the <em>Slurm</em> scheduler</a></li>
</ul>
<p>Additionally, there are pages with reference material (see the right side of the top menu bar of this side) on:</p>
<ul>
<li><a href="../info/osc_transfer.html">File transfer to and from OSC</a></li>
<li><a href="../info/osc_ssh.html">Using OSC with SSH</a> (rather than through OnDemand)</li>
</ul>
<p><br></p>
</section>
<section id="at-home-reading-admin-further-resources" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="at-home-reading-admin-further-resources">At-home reading: admin &amp; further resources</h2>
<section id="administrative-miscellaneae" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="administrative-miscellaneae">Administrative miscellaneae</h3>
<ul>
<li><p><strong>Requesting &amp; managing OSC Projects, and user accounts</strong><br>
Generally, only PIs request <strong>OSC projects</strong>, and they typically manage them as well. OSC has <a href="https://www.osc.edu/supercomputing/support/account">this page with more information on how to do so</a>. Whoever manages an OSC Project can add both existing OSC users and new users to the Project. Anyone added to an OSC Project will have access to the project’s directories, and will be able specify this Project when issuing compute node resource requests.</p>
<p>When you get added to an OSC Project and don’t yet have an OSC <strong>account</strong>, you will automatically receive an email with a link that allows you to create an account. It is not possible to create an account before having been added to an OSC Project.</p></li>
<li><p><strong>Billing</strong><br>
OSC will bill OSC Projects (not individual users), and only for the following two things:</p>
<ul>
<li><em><strong>File storage</strong></em> in the Project Storage file system</li>
<li><em><strong>Compute node usage</strong></em> by “core hour” (e.g.&nbsp;using 2 cores for 2 hours = 4 core hours)</li>
</ul>
<p>The prices for academic usage are quite low (see <a href="https://www.osc.edu/content/academic_fee_model_faq">this page for specifics</a>), and importantly, at OSU, they are often <em>covered at the department level</em> such that individual PIs do not have to directly pay for this at all.</p></li>
<li><p>When you use OSC, it’s good practice to <strong>acknowledge and cite OSC</strong> in your papers, see their <a href="https://www.osc.edu/resources/getting_started/citation">citation page</a>.</p></li>
<li><p>For many questions such as if you have problems with your account, have problems installing or using specific software, or don’t understand why your jobs keep failing, you can <strong>email OSC at <a href="mailto:oschelp@osc.edu" class="email">oschelp@osc.edu</a></strong>. They are usually very quick to respond!</p></li>
</ul>
<p><br></p>
</section>
<section id="oscs-learning-resources" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="oscs-learning-resources">OSC’s learning resources</h3>
<p>To learn more about OSC, I would start with these short courses:</p>
<ul>
<li><strong><a href="https://www.osc.edu/supercomputing/training">OSC’s online asynchronous courses</a></strong>
<ul>
<li>This includes a number of short videos</li>
<li>When I tried to access these last, it wasn’t always clear where to go <em>after enrolling</em>, and one of the two courses had even diseappeared from the list. But the website <a href="https://scarlet.instructure.com" class="uri">https://scarlet.instructure.com</a> then listed the courses and provided access.</li>
</ul></li>
</ul>
<p>This series of pages is also useful:</p>
<ul>
<li><a href="https://www.osc.edu/resources/getting_started/new_user_resource_guide">New User Resource Guide</a></li>
<li><a href="https://www.osc.edu/resources/getting_started/supercomputing_faq">Supercomputing FAQ</a></li>
<li><a href="https://www.osc.edu/resources/getting_started/howto">HOWTOs</a> (tutorials on specific topics)</li>
<li><a href="https://www.osc.edu/supercomputing/batch-processing-at-osc">Info on batch (non-interactive) compute jobs</a> (rather technical)</li>
<li><a href="https://www.osc.edu/events">OSC “events” such as Office Hours</a></li>
</ul>
<p><br></p>
</section>
<section id="acknowledgements" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="acknowledgements">Acknowledgements</h3>
<p>This page uses material from an <a href="https://mcic-osu.github.io/cl-workshop-22/modules/02-osc.html">OSC Introduction written by Mike Sovic</a> and from OSC’s Kate Cahill <a href="https://khill42.github.io/OSC_IntroHPC%3E">Software Carpentry introduction to OSC</a>.</p>
<p><br></p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Or <code>/fs/project/</code><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Or <code>/fs/ess/scratch</code><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>For example, many genome and transcriptome assemblers output a lot of data, but you will only need a few files (like the assembly) for your next steps.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Some examples where you might need a different type of node are genome or transcriptome assembly where you might need nodes with a lot of memory, or Oxford Nanopore sequence data basecalling where you might need GPUs.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">2023, Jelmer Poelstra</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mcic-osu/rnaseq-intro">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>